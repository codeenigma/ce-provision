---
- hosts: provision-privileged
  become: true

  vars:
    project_name: gitlab
    _ce_provision_base_dir: /home/ce-dev/ce-provision
    _init:
      vars_dirs:
        - "{{ _ce_provision_base_dir }}/ce-dev/ansible/vars/_common"
        - "{{ _ce_provision_base_dir }}/ce-dev/ansible/vars/{{ project_name }}"

  tasks:
    - ansible.builtin.import_role:
        name: _init
    - ansible.builtin.import_role:
        name: gitlab
    - ansible.builtin.import_role:
        name: haproxy
    - ansible.builtin.import_role:
        name: _exit
