---
dependencies:
  - role: debian/apt_extra_packages
    apt_extra_packages:
      - rsync
      - python3-apt
      - acl
      - gnupg
      - build-essential
      - cron
      - bsd-mailx
      - vim
      - unzip
      - ca-certificates
  - role: debian/apt_extra_packages
    apt_extra_packages:
      - dnsutils
      - telnet
      - atop
      - sysstat
      - tcpdump
      - mtr-tiny
      - htop
      - ntp
      - screen
      - iptraf-ng
    when: is_local is not defined or not is_local
  - role: debian/locales
  - role: debian/user_root
  - role: debian/user_provision
  - role: debian/apt_extra_packages
  - role: debian/apt_unattended_upgrades
    when: is_local is not defined or not is_local
  - role: debian/hosts
    when: is_local is not defined or not is_local
  - role: debian/rkhunter
    when: is_local is not defined or not is_local
  - role: debian/postfix
  - role: debian/clamav
    when: is_local is not defined or not is_local
  - role: debian/firewall_config
    when: is_local is not defined or not is_local
  - role: debian/sudo_config
    when: is_local is not defined or not is_local
  - role: debian/ansible
    ce_ansible:
      venv_path: "/home/{{ ce_provision.username }}/ansible"
      venv_command: "{{ venv_command }}"
      install_username: "{{ ce_provision.username }}"
      upgrade:
        enabled: true
        command: "/home/{{ ce_provision.username }}/ansible/bin/python3 -m pip install --upgrade ansible"
        on_calendar: "*-*-* 01:30:00"
      linters:
        enabled: false
