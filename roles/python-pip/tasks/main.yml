---
- name: Ensure old pip versions are not installed.
  ansible.builtin.apt:
    pkg: ["python-pip", "python3-pip"]
    state: absent

- name: Fetch Pip installer.
  ansible.builtin.get_url:
    url: https://bootstrap.pypa.io/get-pip.py
    dest: /tmp/get-pip.py

- name: Ensure pip3 is installed.
  ansible.builtin.shell: python3 /tmp/get-pip.py

- name: Rehash pip3 executable in bash cache.
  ansible.builtin.shell: hash -d pip3

- name: Ensure python3 is the default binary.
  ansible.builtin.command:
    cmd: update-alternatives --install /usr/bin/python python /usr/bin/python3 1
  become: true
