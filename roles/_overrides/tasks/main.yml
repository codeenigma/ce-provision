---
- name: Load custom vars file.
  ansible.builtin.include_tasks: allowed_vars.yml
  when:
    - ce_provision.extra_repository
    - ce_provision.extra_repository_vars_file
    - ce_provision.extra_repository_allowed_vars

- name: Generate files overrides.
  ansible.builtin.include_tasks: file.yml
  with_items: "{{ _overrides.files }}"
  loop_control:
    loop_var: override_file
  when:
    - _overrides.files is defined
    - _overrides.files | length

- name: Generate links overrides.
  ansible.builtin.include_tasks: link.yml
  with_items: "{{ _overrides.links }}"
  loop_control:
    loop_var: override_link
  when:
    - _overrides.links is defined
    - _overrides.links | length
